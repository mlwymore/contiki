<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>E.M.M.A: E.M.M.A RestFull HTTP API</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.3 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>E.M.M.A RestFull HTTP API</h1>
<p>E.M.M.A RestFull HTTP API is a network interface API for communication between different nodes on HTTP IPV6 Protocol.<br/>
 The goal of this API is to make a network without gateway for coordination task but a network with distributed intelligence on the network. Each node is responsible of its ressources and have a decision table (<a class="el" href="struct_report.html">Report</a> mechanism) for transmit order.<br/>
 The decision table must be created and updated by the network itself. A responsible node or human must set the node configurations, we talk about Network Manager Node which must check the network homogeneity and occured network error to reconfigure the node. <br/>
 <br/>
 This N.M.N is not necessary to be always connected on the network and just can be installed on a smartphone which gets all logs and monitors occasionally the network reaction. This N.M.N can be directly a webserver on the internet and performs the operation throw an 6to4 tunnel.  
<a href="#_details">More...</a></p>
<table border="0" cellpadding="0" cellspacing="0">
</table>
<p>E.M.M.A RestFull HTTP API is a network interface API for communication between different nodes on HTTP IPV6 Protocol.<br/>
 The goal of this API is to make a network without gateway for coordination task but a network with distributed intelligence on the network. Each node is responsible of its ressources and have a decision table (<a class="el" href="struct_report.html">Report</a> mechanism) for transmit order.<br/>
 The decision table must be created and updated by the network itself. A responsible node or human must set the node configurations, we talk about Network Manager Node which must check the network homogeneity and occured network error to reconfigure the node. <br/>
 <br/>
 This N.M.N is not necessary to be always connected on the network and just can be installed on a smartphone which gets all logs and monitors occasionally the network reaction. This N.M.N can be directly a webserver on the internet and performs the operation throw an 6to4 tunnel. </p>
<div align="center">
<img src="Network.png" alt="Network.png"/>
</div>
<h2><a class="anchor" id="core">
E.M.M.A RestFull HTTP core is composed by :</a></h2>
<ul>
<li>A litle <a class="el" href="group___e_m_m_a___h_t_t_p.html#webserver">RestFull HTTP webserver :</a>. </li>
<li>A litle <a class="el" href="group___e_m_m_a___h_t_t_p.html#client">RestFull HTTP client :</a></li>
</ul>
<h2><a class="anchor" id="webserver">
RestFull HTTP webserver :</a></h2>
<p>The webserver allows the publication of all declared ressources in the application. The publication is automatic and standard by using JSON data representation on a paradigm RestFull. All ressource must be unique and accessible by a unique URI, the URI mechanism ensures that.<br/>
 The root's webserver contains an index of all ressources and their full access path. All ressources are loggued and the access of its are available by add log/{* | IdLog} after the full ressource URI.<br/>
 The ressources are periodically refreshed by a time interval specify during compilation process. When an incomming request is received, the response sends the last refreshed data value.<br/>
 <br/>
 A ressource is represented by an integer and an associated unit, and have already an associated getter function, and a setter function if the ressource is writtable.<br/>
<br/>
 Links : </p>
<ul>
<li><a class="el" href="group___e_m_m_a___h_t_t_p.html#uri">URI available :</a> </li>
<li><a class="el" href="group___e_m_m_a___h_t_t_p.html#error">Return Error Code</a> <br/>
 </li>
</ul>
<h2><a class="anchor" id="client">
RestFull HTTP client :</a></h2>
<p>The client allows notification by report. Network administrator or the network itself can post report on the node to configure the sended request by the node. All HTTP request header and body can be specified with sending condition.<br/>
</p>
<ul>
<li><a class="el" href="struct_report.html">Report</a> mechanism : An network agent (Human or Machine) send a POST request on a specific or on all the ressources with /report/ after full URI and set a condition to send.</li>
</ul>
<ul>
<li>Notify mechanism : A periodic thread browses all reports, checks their sending condition, and if it's necessary, schedules its. The scheduling depends of the outcomming simultaneous connection maximum define during compilation process.<br/>
<br/>
 Note : Like all outcomming requests can be configured, their can be not necessary a RestFull JSON representation but a simple HTML request, Ajax request, etc... Each report needs a minimum of 92 bytes of EEPROM memory and 164 bytes are transmited during a request.</li>
</ul>
<h2><a class="anchor" id="uri">
URI available :</a></h2>
<ul>
<li>GET /<br/>
 Response : <div class="fragment"><pre class="fragment">   [
    {
     <span class="stringliteral">&quot;name&quot;</span>:<span class="stringliteral">&quot;ressource&quot;</span>,
     <span class="stringliteral">&quot;uri&quot;</span>:<span class="stringliteral">&quot;http://[host ::ipv6]/data/ { name } /&quot;</span>
    }, [...]
   ]
</pre></div></li>
</ul>
<ul>
<li>GET /data/ { * | RessourceName }/<br/>
 Response : <div class="fragment"><pre class="fragment">{
<span class="stringliteral">&quot;name&quot;</span>:<span class="stringliteral">&quot;brightness&quot;</span>,
<span class="stringliteral">&quot;unit&quot;</span>:<span class="stringliteral">&quot;lux&quot;</span>,
<span class="stringliteral">&quot;InstatenousRate&quot;</span>:<span class="stringliteral">&quot;2&quot;</span>
}
</pre></div></li>
</ul>
<ul>
<li>GET /data/ { * | RessourceName } /meta/<br/>
 Response : <div class="fragment"><pre class="fragment">{
<span class="stringliteral">&quot;name&quot;</span>:<span class="stringliteral">&quot;brightness&quot;</span>,
<span class="stringliteral">&quot;min&quot;</span>:<span class="stringliteral">&quot;0&quot;</span>,
<span class="stringliteral">&quot;max&quot;</span>:<span class="stringliteral">&quot;100&quot;</span>,
<span class="stringliteral">&quot;readonly&quot;</span>:<span class="stringliteral">&quot;1&quot;</span>
}
</pre></div></li>
</ul>
<ul>
<li>GET /data/ { * | RessourceName } /report/ { * | ReportId } /<br/>
 Response : <div class="fragment"><pre class="fragment">{
<span class="stringliteral">&quot;host&quot;</span>:<span class="stringliteral">&quot;[3ffe:0501:ffff:0100:0206:98ff:fe00:0231]&quot;</span>,
<span class="stringliteral">&quot;uri&quot;</span>:<span class="stringliteral">&quot;notify.php&quot;</span>,
<span class="stringliteral">&quot;port&quot;</span>:<span class="stringliteral">&quot;80&quot;</span>,
<span class="stringliteral">&quot;method&quot;</span>:<span class="stringliteral">&quot;GET&quot;</span>,
<span class="stringliteral">&quot;body&quot;</span>:<span class="stringliteral">&quot;&quot;</span>,
<span class="stringliteral">&quot;condition&quot;</span>:<span class="stringliteral">&quot;!%this.time || this.brightness &lt; 100&quot;</span>
}
</pre></div></li>
</ul>
<ul>
<li>GET /data/ { * | RessourceName } /log/ { * | LogId } /<br/>
 Response : <div class="fragment"><pre class="fragment">[
{
<span class="stringliteral">&quot;id&quot;</span>:<span class="stringliteral">&quot;192&quot;</span>,
<span class="stringliteral">&quot;name&quot;</span>:<span class="stringliteral">&quot;temperature&quot;</span>,
<span class="stringliteral">&quot;value&quot;</span>:<span class="stringliteral">&quot;30&quot;</span>,
<span class="stringliteral">&quot;time&quot;</span>:<span class="stringliteral">&quot;165&quot;</span>
},[...]
]
</pre></div></li>
</ul>
<ul>
<li>POST /data/ { * | RessourceName } /report/<br/>
 Body <div class="fragment"><pre class="fragment">{
<span class="stringliteral">&quot;host&quot;</span>:<span class="stringliteral">&quot;[3ffe:0501:ffff:0100:0206:98ff:fe00:0231]&quot;</span>,
<span class="stringliteral">&quot;uri&quot;</span>:<span class="stringliteral">&quot;notify.php&quot;</span>,
<span class="stringliteral">&quot;port&quot;</span>:<span class="stringliteral">&quot;80&quot;</span>,
<span class="stringliteral">&quot;method&quot;</span>:<span class="stringliteral">&quot;GET&quot;</span>,
<span class="stringliteral">&quot;name&quot;</span>:<span class="stringliteral">&quot;{ * | RessourceName }&quot;</span>,
<span class="stringliteral">&quot;body&quot;</span>:<span class="stringliteral">&quot;{&quot;</span>value<span class="stringliteral">&quot;:&quot;</span>this.white1 + 100<span class="stringliteral">&quot;}&quot;</span>,
<span class="stringliteral">&quot;condition&quot;</span>:<span class="stringliteral">&quot;!%this.time || this.brightness &lt; 100&quot;</span>
}
</pre></div></li>
</ul>
<ul>
<li>DELETE /data/ { * | RessourceName } /report/ { * | IdReport }/<br/>
</li>
</ul>
<ul>
<li>PUT /data/{*|RessourceName}\/<br/>
 Body : <div class="fragment"><pre class="fragment"> {
  <span class="stringliteral">&quot;value&quot;</span>:<span class="stringliteral">&quot;XXX&quot;</span>
 }
</pre></div></li>
</ul>
<ul>
<li>PUT /data/ { * | RessourceName } /report/ { IdReport }/<br/>
 Body : <div class="fragment"><pre class="fragment">{
<span class="stringliteral">&quot;host&quot;</span>:<span class="stringliteral">&quot;[3ffe:0501:ffff:0100:0206:98ff:fe00:0231]&quot;</span>,
<span class="stringliteral">&quot;uri&quot;</span>:<span class="stringliteral">&quot;notify.php&quot;</span>,
<span class="stringliteral">&quot;port&quot;</span>:<span class="stringliteral">&quot;80&quot;</span>,
<span class="stringliteral">&quot;method&quot;</span>:<span class="stringliteral">&quot;GET&quot;</span>,
<span class="stringliteral">&quot;body&quot;</span>:<span class="stringliteral">&quot;&quot;</span>,
<span class="stringliteral">&quot;condition&quot;</span>:<span class="stringliteral">&quot;!%this.time || this.brightness &lt; 100&quot;</span>
}
</pre></div></li>
</ul>
<ul>
<li>GET /report/meta/<br/>
 <div class="fragment"><pre class="fragment">...
</pre></div></li>
</ul>
<ul>
<li>GET /meta<br/>
 <div class="fragment"><pre class="fragment">...
</pre></div></li>
</ul>
<h2><a class="anchor" id="error">
Return Error Code</a></h2>
<ul>
<li>200 OK </li>
<li>400 Bad Request </li>
<li>403 Forbidden </li>
<li>404 Not Found </li>
<li>405 Method Not Allowed </li>
<li>408 Request Timeout </li>
<li>411 Length required </li>
<li>413 Entity too long </li>
<li>414 Uri too large </li>
<li>500 Internal Error </li>
</ul>
</div>
<hr class="footer"/><address style="text-align: right;"><small>Generated on Thu Jul 29 13:41:55 2010 for E.M.M.A by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
