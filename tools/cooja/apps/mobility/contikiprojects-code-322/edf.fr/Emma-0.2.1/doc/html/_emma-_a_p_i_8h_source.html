<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>E.M.M.A: /home/slash/Public/EMMA-sourceForge/edf.fr/Emma-0.2.2/apps/Emma-Rest6/Emma-API.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.3 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="dir_8031364a1b0b1ab425ed6f42a45d8785.html">apps</a>&nbsp;&raquo;&nbsp;<a class="el" href="dir_fe11fce74c78c7de6712b86d0554d2ae.html">Emma-Rest6</a>
  </div>
</div>
<div class="contents">
<h1>Emma-API.h</h1><a href="_emma-_a_p_i_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 
<a name="l00041"></a>00041 <span class="preprocessor">#include &quot;<a class="code" href="_emma-_rest6_8h.html">Emma-Rest6.h</a>&quot;</span>
<a name="l00042"></a>00042 <span class="preprocessor">#include &lt;stdio.h&gt;</span>
<a name="l00043"></a>00043 
<a name="l00055"></a><a class="code" href="group___a_p_i.html#gad17bb4eddd965859134db80648127c2f">00055</a> <span class="preprocessor">#define RESSOURCES_LOADER() \</span>
<a name="l00056"></a>00056 <span class="preprocessor">                void ressources_loader() </span>
<a name="l00057"></a>00057 <span class="preprocessor"></span>
<a name="l00064"></a><a class="code" href="group___a_p_i.html#ga7ee8861685eda1c0b29870d9d7cf6af2">00064</a> <span class="preprocessor">#define RESSOURCES_INIT() \</span>
<a name="l00065"></a>00065 <span class="preprocessor">        void ressources_init()</span>
<a name="l00066"></a>00066 <span class="preprocessor"></span>
<a name="l00074"></a><a class="code" href="group___a_p_i.html#ga666d082a36eccb58627ebe645fce7ca0">00074</a> <span class="preprocessor">#define RESSOURCE_INIT(sensor) \</span>
<a name="l00075"></a>00075 <span class="preprocessor">        volatile struct Ressource sensor</span>
<a name="l00076"></a>00076 <span class="preprocessor"></span>
<a name="l00084"></a><a class="code" href="group___a_p_i.html#ga6736a44b0d83df8d9f9aae79792a752e">00084</a> <span class="preprocessor">#define RESSOURCE_UNIT(sensor, unite) \</span>
<a name="l00085"></a>00085 <span class="preprocessor">                        strcpy((char*)sensor.name,#sensor &quot;\0&quot;); \</span>
<a name="l00086"></a>00086 <span class="preprocessor">                        list_add(ressources_list, (char*)&amp;sensor); \</span>
<a name="l00087"></a>00087 <span class="preprocessor">                        strcpy((char*)sensor.unit,#unite &quot;\0&quot;)</span>
<a name="l00088"></a>00088 <span class="preprocessor"></span>
<a name="l00096"></a><a class="code" href="group___a_p_i.html#ga2db8bca14485cfc8f309b29b450995e0">00096</a> <span class="preprocessor">#define RESSOURCE_SET(sensor, setFunc) \</span>
<a name="l00097"></a>00097 <span class="preprocessor">        sensor.setData = setFunc</span>
<a name="l00098"></a>00098 <span class="preprocessor"></span>
<a name="l00106"></a><a class="code" href="group___a_p_i.html#ga13d315c76e293c3e040bfcbbc5c35237">00106</a> <span class="preprocessor">#define RESSOURCE_GET(sensor, getFunc) \</span>
<a name="l00107"></a>00107 <span class="preprocessor">        sensor.getData = getFunc; \</span>
<a name="l00108"></a>00108 <span class="preprocessor">        sensor.min = 0; \</span>
<a name="l00109"></a>00109 <span class="preprocessor">        sensor.max = 100</span>
<a name="l00110"></a>00110 <span class="preprocessor"></span>
<a name="l00118"></a><a class="code" href="group___a_p_i.html#gae3bedaf94e888ceff6fd02af9e7973b0">00118</a> <span class="preprocessor">#define RESSOURCE_MIN(sensor, Vmin) \</span>
<a name="l00119"></a>00119 <span class="preprocessor">        sensor.min = Vmin</span>
<a name="l00120"></a>00120 <span class="preprocessor"></span>
<a name="l00128"></a><a class="code" href="group___a_p_i.html#ga115ee888a43f70258c1fc218095b915b">00128</a> <span class="preprocessor">#define RESSOURCE_MAX(sensor, Vmax) \</span>
<a name="l00129"></a>00129 <span class="preprocessor">        sensor.max = Vmax</span>
<a name="l00130"></a>00130 <span class="preprocessor"></span>
<a name="l00137"></a><a class="code" href="group___a_p_i.html#gac3a053bf3a96e6d8a32f509f2f12dbfc">00137</a> <span class="preprocessor">#define RESSOURCE_LOAD(sensor) \</span>
<a name="l00138"></a>00138 <span class="preprocessor">        extern struct Ressource sensor</span>
<a name="l00139"></a>00139 <span class="preprocessor"></span>
<a name="l00146"></a><a class="code" href="group___a_p_i.html#ga0f9be559613f6329c91bde1dfb71c814">00146</a> <span class="preprocessor">#define RESSOURCE_LIST(name) \</span>
<a name="l00147"></a>00147 <span class="preprocessor">         volatile void *LIST_CONCAT(name,_list) = NULL; \</span>
<a name="l00148"></a>00148 <span class="preprocessor">         volatile list_t name = (list_t)&amp;LIST_CONCAT(name,_list)</span>
<a name="l00149"></a>00149 <span class="preprocessor"></span>
<a name="l00156"></a><a class="code" href="group___a_p_i.html#gab224bf7cdd4d4b67ca28744e0592b520">00156</a> <span class="preprocessor">#define RESSOURCE_LIST_LOAD(name) \</span>
<a name="l00157"></a>00157 <span class="preprocessor">        extern list_t name</span>
<a name="l00158"></a>00158 <span class="preprocessor"></span>
<a name="l00179"></a><a class="code" href="group___a_p_i.html#ga75f55a7a3f08c05a638db368827db4e1">00179</a> <span class="preprocessor">#define HARDWARE_DIGIT_GET(port, pin) \</span>
<a name="l00180"></a>00180 <span class="preprocessor">        ((port &amp; ( 1 &lt;&lt; pin)) &gt; 0)</span>
<a name="l00181"></a>00181 <span class="preprocessor"></span>
<a name="l00189"></a><a class="code" href="group___a_p_i.html#gac74d14b37c185bccc4add7c9eb736fee">00189</a> <span class="preprocessor">#define HARDWARE_DIGIT_SET_UP(port, pin) \</span>
<a name="l00190"></a>00190 <span class="preprocessor">         port |= (1 &lt;&lt; pin)</span>
<a name="l00191"></a>00191 <span class="preprocessor"></span>
<a name="l00199"></a><a class="code" href="group___a_p_i.html#gaa450a9c4ec202bf49070c08130e99229">00199</a> <span class="preprocessor">#define HARDWARE_DIGIT_SET_DOWN(port,pin) \</span>
<a name="l00200"></a>00200 <span class="preprocessor">         port &amp;= ~(1&lt;&lt;pin) </span>
<a name="l00201"></a>00201 <span class="preprocessor"></span>
<a name="l00215"></a><a class="code" href="group___a_p_i.html#ga9b9262a3e94ab2ca6c8741cf243f3bd9">00215</a> <span class="preprocessor">#define HARDWARE_PWM_INIT() initPWM()</span>
<a name="l00216"></a>00216 <span class="preprocessor"></span>
<a name="l00224"></a><a class="code" href="group___a_p_i.html#gadb32170e0ce7eca8d6169b9d3447c55c">00224</a> <span class="preprocessor">#define HARDWARE_PWM_SET(pin,val) setPWM(pin,val)</span>
<a name="l00225"></a>00225 <span class="preprocessor"></span>
<a name="l00232"></a><a class="code" href="group___a_p_i.html#gafd8e4c58b216827db37be12fc376e11a">00232</a> <span class="preprocessor">#define HARDWARE_PWM_GET(pin) getPWM(pin) </span>
<a name="l00233"></a>00233 <span class="preprocessor"></span>
<a name="l00241"></a><a class="code" href="group___a_p_i.html#gad6c6ef99f6cfff190980f38f55ac17e1">00241</a> <span class="preprocessor">#define I2C_READ_FLAG    1</span>
<a name="l00242"></a><a class="code" href="group___a_p_i.html#gaa4bae5192450a6f67fb486bbf81f14e5">00242</a> <span class="preprocessor"></span><span class="preprocessor">#define I2C_WRITE_FLAG   0</span>
<a name="l00243"></a>00243 <span class="preprocessor"></span><span class="comment">/*---------------------------------------------------------------------------*/</span>
<a name="l00249"></a><a class="code" href="group___a_p_i.html#gab0e6006c67f5ebc4e3af3a1397114fae">00249</a> <span class="preprocessor">#define I2C_INIT()           i2c_init()</span>
<a name="l00250"></a>00250 <span class="preprocessor"></span>
<a name="l00251"></a>00251 <span class="comment">/*---------------------------------------------------------------------------*/</span>
<a name="l00260"></a><a class="code" href="group___a_p_i.html#gac750dc697e624fdc86d425b981309715">00260</a> <span class="preprocessor">#define I2C_START(addr)      i2c_start(addr)</span>
<a name="l00261"></a>00261 <span class="preprocessor"></span>
<a name="l00262"></a>00262 <span class="comment">/*---------------------------------------------------------------------------*/</span>
<a name="l00271"></a><a class="code" href="group___a_p_i.html#ga7d0f287b48f1c0dceca5bc93f13d68e6">00271</a> <span class="preprocessor">#define I2C_START_WAIT(addr) i2c_start_wait(addr)</span>
<a name="l00272"></a>00272 <span class="preprocessor"></span>
<a name="l00273"></a>00273 <span class="comment">/*---------------------------------------------------------------------------*/</span>
<a name="l00282"></a><a class="code" href="group___a_p_i.html#ga9044ef4eb5fc533bca8af153f4672c6a">00282</a> <span class="preprocessor">#define I2C_REP_START(addr)  i2c_rep_start(addr)</span>
<a name="l00283"></a>00283 <span class="preprocessor"></span>
<a name="l00284"></a>00284 <span class="comment">/*---------------------------------------------------------------------------*/</span>
<a name="l00290"></a><a class="code" href="group___a_p_i.html#gab87de522300f4f638def4d04efca40b2">00290</a> <span class="preprocessor">#define I2C_STOP()           i2c_stop()</span>
<a name="l00291"></a>00291 <span class="preprocessor"></span>
<a name="l00292"></a>00292 <span class="comment">/*---------------------------------------------------------------------------*/</span>
<a name="l00300"></a><a class="code" href="group___a_p_i.html#gad6eb34c1e1ad84452de664517497106e">00300</a> <span class="preprocessor">#define I2C_WRITE(data)      i2c_write(data)</span>
<a name="l00301"></a>00301 <span class="preprocessor"></span>
<a name="l00302"></a>00302 <span class="comment">/*---------------------------------------------------------------------------*/</span>
<a name="l00308"></a><a class="code" href="group___a_p_i.html#ga14ae56cb1a6ad9d619b0699a45e765e7">00308</a> <span class="preprocessor">#define I2C_READ_ACK()       i2c_readAck()</span>
<a name="l00309"></a>00309 <span class="preprocessor"></span>
<a name="l00310"></a>00310 <span class="comment">/*---------------------------------------------------------------------------*/</span>
<a name="l00316"></a><a class="code" href="group___a_p_i.html#gaeaf049e5fe7d99ee0b95ec2790a57afd">00316</a> <span class="preprocessor">#define I2C_READ_NACK()      i2c_readNak()</span>
<a name="l00317"></a>00317 <span class="preprocessor"></span>
<a name="l00325"></a>00325 <span class="keywordtype">void</span> <a class="code" href="group___a_p_i.html#ga428d429e060d60c0b086eeb8310ed4b6">initPWM</a>(<span class="keywordtype">void</span>);
<a name="l00326"></a>00326 <span class="keywordtype">void</span> <a class="code" href="group___a_p_i.html#ga1e88117a90e0a6ba12634b1b99f7672e">setPWM</a>(<span class="keywordtype">char</span> pin, <span class="keywordtype">int</span> val);
<a name="l00327"></a>00327 <span class="keywordtype">int</span> <a class="code" href="group___a_p_i.html#gad0123169dea8a8f181c8b535bc7b273a">getPWM</a>(<span class="keywordtype">char</span> pin);
<a name="l00328"></a>00328 
<a name="l00329"></a>00329 <span class="keywordtype">void</span> <a class="code" href="group___a_p_i.html#ga5730d9445429351b9f750084c5cb5aae">i2c_init</a>(<span class="keywordtype">void</span>);
<a name="l00330"></a>00330 <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="group___a_p_i.html#gaa3d328f00326115e9c660ccc838417c8">i2c_start</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> address);
<a name="l00331"></a>00331 <span class="keywordtype">int</span> <a class="code" href="group___a_p_i.html#gaa25c9da7f8c130cc76d83f23547d2c8f">i2c_start_wait</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> address);
<a name="l00332"></a>00332 <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="group___a_p_i.html#ga70c934b61f3c6ba8524104a1d7197d30">i2c_rep_start</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> address);
<a name="l00333"></a>00333 <span class="keywordtype">void</span> <a class="code" href="group___a_p_i.html#gad35d4e4f52ca74b503d5e5e1e0a3f5f3">i2c_stop</a>(<span class="keywordtype">void</span>);
<a name="l00334"></a>00334 <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="group___a_p_i.html#gadd947aade44ed6b7f92265f9dec4a711">i2c_write</a>( <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> data );
<a name="l00335"></a>00335 <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="group___a_p_i.html#ga32ac22052d55f93375b024192217db21">i2c_readAck</a>(<span class="keywordtype">void</span>);
<a name="l00336"></a>00336 <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="group___a_p_i.html#gad89e839fc17b05fbb5dd79897c55234e">i2c_readNak</a>(<span class="keywordtype">void</span>);
<a name="l00346"></a>00346 <span class="keywordtype">void</span> <a class="code" href="group___a_p_i.html#gac5c8859e992ae87511543190c3005e3e">ressources_init</a>();
<a name="l00347"></a>00347 <span class="keywordtype">void</span> <a class="code" href="group___a_p_i.html#gaefd8dce8b3c5861df6f9f5127fd0394b">ressources_loader</a>();
<a name="l00348"></a>00348 
</pre></div></div>
<hr class="footer"/><address style="text-align: right;"><small>Generated on Thu Jul 29 13:41:55 2010 for E.M.M.A by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
